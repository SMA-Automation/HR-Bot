# -*- coding: utf-8 -*-"""Dr. Sönke MagnussenThis is a prototype for chatbot for HR chat.Version 0.5 02.04.2017"""import nltkfrom nltk.tokenize import word_tokenizefrom nltk.stem.snowball import SnowballStemmerfrom nltk.corpus import stopwordsfrom sklearn.feature_extraction.text import CountVectorizerfrom sklearn import treefrom sklearn import svmclf = svm.SVC()#my input messagesmessages = []messages += ["Hi everybody, I would like to get a copy of my last payroll"]messages += ["Good morning, lost my last payroll, can you send it to me again?"]messages += ["Dear Fred, it seems that I can't find payroll of mine for last month. Could you please send a copy?"]messages += ["Dear team, please find attached my new health insurance certificate"]messages += ["Hi everybode, please apply my new attached my health insurance certificate for next payrol job"]##Start of preprocessing the messages# Initialize stemmer and vectorizerstemmer = SnowballStemmer("english")vectorizer = CountVectorizer()#Defining stopwordsstop_words = set(stopwords.words("english"))stop_words = stop_words | {'hi','good', 'dear','morn'}## process messages in a loop# for stemming and stopwords#def vectorizeWords(messages) :    input_list = []    i=0    while  i<len(messages):        words = word_tokenize(messages[i])        sentence = ""        for w in words:            stemw = stemmer.stem(w)            if stemw not in stop_words:                sentence += stemw+" "        print(sentence)        input_list += [sentence]        i += 1    return input_listinput_list = vectorizeWords(messages)## Apply bag of words principle#bag_of_words = vectorizer.fit(input_list)print(vectorizer.vocabulary_)bag_of_words = vectorizer.transform(input_list)print (bag_of_words)print()#print(vectorizer.vocabulary_)print()print(vectorizer.vocabulary_.get("payrol"))print(vectorizer.vocabulary_.get("send"))print(vectorizer.vocabulary_.get("get"))#labels#features#fittingclf = tree.DecisionTreeClassifier()clf.fit(bag_of_words,[1,1,1,2,2])#TestmessageChatbot =[]#messageChatbot += ["Hi there, please send my last payrol again"]messageChatbot += ["Hi there, please find attached my new health insurance certificate"]vw = vectorizeWords(messageChatbot)vcb = vectorizer.transform(vw)print(vcb)p = clf.predict(vcb)print("classification -->" + str(p))
